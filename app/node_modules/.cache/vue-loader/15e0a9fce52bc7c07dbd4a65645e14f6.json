{"remainingRequest":"/home/agustin/Desktop/Vue/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/agustin/Desktop/Vue/app/src/components/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/agustin/Desktop/Vue/app/src/components/Login.vue","mtime":1578771009748},{"path":"/home/agustin/Desktop/Vue/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/agustin/Desktop/Vue/app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/agustin/Desktop/Vue/app/node_modules/vuetify-loader/lib/loader.js","mtime":1567240333000},{"path":"/home/agustin/Desktop/Vue/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/agustin/Desktop/Vue/app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTG9naW4iLAoKICBkYXRhOiAoKSA9PiAoewogICAgZW1haWw6ICIiLAogICAgcGFzc3dvcmQ6ICIiLAogICAgc2hvd1Bhc3M6IHRydWUsCiAgICBlbWFpbFJ1bGVzOiBbCiAgICAgIHYgPT4gISF2IHx8ICJEZWJlIGluZ3Jlc2FyIHN1IGUtbWFpbCIsCiAgICAgIHYgPT4gLy4rQC4rXC4uKy8udGVzdCh2KSB8fCAiRXN0ZSBlLW1haWwgbm8gZXMgdsOhbGlkbyIsIC8vIGFsZ29AYWxnby5hbGdvCiAgICAgIHYgPT4gKHYgfHwgIiIpLmluZGV4T2YoIiAiKSA8IDAgfHwgIkVzdGUgZS1tYWlsIG5vIGVzIHbDoWxpZG8iIC8vIHNpbiBlc3BhY2lvcwogICAgXSwKICAgIG1lc3NhZ2U6ICIiLAogICAgdmFsaWQ6IGZhbHNlCiAgfSksCiAgbWV0aG9kczogewogICAgZm9ybVN1Ym1pdChlKSB7CiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgbGV0IG1lID0gdGhpczsKICAgICAgdGhpcy5heGlvcwogICAgICAgIC5wb3N0KCJodHRwOi8vbG9jYWxob3N0OjU1NTUvbG9naW4iLCB7CiAgICAgICAgICBlbWFpbDogdGhpcy5lbWFpbCwKICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLnBhc3N3b3JkCiAgICAgICAgfSkKICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkgewogICAgICAgICAgbWUubWVzc2FnZSA9ICIiOwoKICAgICAgICAgIG1lLiRzZXNzaW9uLnN0YXJ0KCk7CiAgICAgICAgICBtZS4kc2Vzc2lvbi5zZXQoImp3dCIsIHJlc3BvbnNlLmRhdGEudG9rZW4pOwogICAgICAgICAgbWUuJHNlc3Npb24uc2V0KCJhY2NvdW50SWQiLCByZXNwb25zZS5kYXRhLmlkKTsKICAgICAgICAgIG1lLiRzZXNzaW9uLnNldCgiYWNjb3VudFJvbGUiLCByZXNwb25zZS5kYXRhLnJvbGUpOwogICAgICAgICAgbWUuYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb24gPSB7CiAgICAgICAgICAgICJhdXRob3JpemF0aW9uIjogcmVzcG9uc2UuZGF0YS50b2tlbgogICAgICAgICAgfQogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEucm9sZSA9PSAxKSB7CiAgICAgICAgICAgIG1lLiRyb3V0ZXIucHVzaCgiL2xpc3RhZG9Tb2NpbyIpOwogICAgICAgICAgfQogICAgICAgICAgLy8gcmVzcG9uc2UuZGF0YS5yb2xlID09IDEgc29jaW8KICAgICAgICAgIC8vIHJlc3BvbnNlLmRhdGEucm9sZSA9PSAwIGJpYmxpb3RlY2FyaW8KICAgICAgICB9KQogICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnJvcikgewogICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlICYmIGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PSA0MDQpIHsKICAgICAgICAgICAgbWUubWVzc2FnZSA9ICJFbCBlLW1haWwgeS9vIGxhIGNvbnRyYXNlw7FhIHNvbiBpbmNvcnJlY3RvcyI7CiAgICAgICAgICB9IGVsc2UgaWYgKChlcnJvci5yZXNwb25zZSAmJiBlcnJvci5yZXNwb25zZS5zdGF0dXMgPT0gNTAwKSB8fCBlcnJvci5tZXNzYWdlKSB7CiAgICAgICAgICAgIG1lLm1lc3NhZ2UgPQogICAgICAgICAgICAgICJIdWJvIHVuIGVycm9yLCBwb3IgZmF2b3IgdnVlbHZhIGEgaW50ZW50YXIgZW4gdW4gbW9tZW50by4iOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-app id=\"container\">\n    <v-container fluid class=\"mx-auto my-auto\">\n      <v-row>\n        <v-col cols=\"12\">\n          <v-row justify=\"center\">\n            <v-card elevation=\"10\" class=\"mt-5 px-4\" shaped>\n              <v-card-title>Iniciar sesión</v-card-title>\n              <v-card-text>\n                <v-form v-model=\"valid\" @submit=\"formSubmit\" ref=\"form\">\n                  <v-text-field\n                    v-model=\"email\"\n                    :rules=\"emailRules\"\n                    label=\"E-mail\"\n                    prepend-icon=\"mdi-account-circle\"\n                    required\n                  ></v-text-field>\n                  <v-text-field\n                    v-model=\"password\"\n                    :rules=\"[v => !!v || 'Debe ingresar su contraseña']\"\n                    :append-icon=\"showPass ? 'mdi-eye-off' : 'mdi-eye'\"\n                    :type=\"showPass ? 'password' : 'text'\"\n                    name=\"input-10-2\"\n                    label=\"Contraseña\"\n                    class=\"input-group--focused\"\n                    prepend-icon=\"mdi-lock\"\n                    @click:append=\"showPass = !showPass\"\n                    required\n                  ></v-text-field>\n                  <div class=\"pt-3\">\n                    <v-btn\n                      :disabled=\"!valid\"\n                      block\n                      rounded\n                      color=\"info\"\n                      id=\"ingresar\"\n                      type=\"submit\"\n                    >Ingresar</v-btn>\n                  </div>\n                  <center class=\"pt-4 pb-1\">\n                    <p style=\"color:red\">{{message}}</p>\n                  </center>\n                </v-form>\n              </v-card-text>\n            </v-card>\n          </v-row>\n        </v-col>\n      </v-row>\n    </v-container>\n  </v-app>\n</template>\n\n<script>\nexport default {\n  name: \"Login\",\n\n  data: () => ({\n    email: \"\",\n    password: \"\",\n    showPass: true,\n    emailRules: [\n      v => !!v || \"Debe ingresar su e-mail\",\n      v => /.+@.+\\..+/.test(v) || \"Este e-mail no es válido\", // algo@algo.algo\n      v => (v || \"\").indexOf(\" \") < 0 || \"Este e-mail no es válido\" // sin espacios\n    ],\n    message: \"\",\n    valid: false\n  }),\n  methods: {\n    formSubmit(e) {\n      e.preventDefault();\n      let me = this;\n      this.axios\n        .post(\"http://localhost:5555/login\", {\n          email: this.email,\n          password: this.password\n        })\n        .then(function(response) {\n          me.message = \"\";\n\n          me.$session.start();\n          me.$session.set(\"jwt\", response.data.token);\n          me.$session.set(\"accountId\", response.data.id);\n          me.$session.set(\"accountRole\", response.data.role);\n          me.axios.defaults.headers.common = {\n            \"authorization\": response.data.token\n          }\n          if (response.data.role == 1) {\n            me.$router.push(\"/listadoSocio\");\n          }\n          // response.data.role == 1 socio\n          // response.data.role == 0 bibliotecario\n        })\n        .catch(function(error) {\n          if (error.response && error.response.status == 404) {\n            me.message = \"El e-mail y/o la contraseña son incorrectos\";\n          } else if ((error.response && error.response.status == 500) || error.message) {\n            me.message =\n              \"Hubo un error, por favor vuelva a intentar en un momento.\";\n          }\n        });\n    }\n  }\n};\n</script>\n\n<style scoped>\n#container {\n  background: url(\"../assets/background2.jpg\") no-repeat center center fixed;\n  -webkit-background-size: cover;\n  -moz-background-size: cover;\n  -o-background-size: cover;\n  background-size: cover;\n}\n#ingresar {\n  color: white;\n}\n#crear {\n  text-transform: inherit;\n}\n</style>\n"]}]}