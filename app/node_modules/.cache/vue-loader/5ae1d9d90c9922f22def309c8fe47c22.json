{"remainingRequest":"/home/agustin/Desktop/Vue/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/agustin/Desktop/Vue/app/src/components/ListadoSocio.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/agustin/Desktop/Vue/app/src/components/ListadoSocio.vue","mtime":1578613308732},{"path":"/home/agustin/Desktop/Vue/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/agustin/Desktop/Vue/app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/agustin/Desktop/Vue/app/node_modules/vuetify-loader/lib/loader.js","mtime":1567240333000},{"path":"/home/agustin/Desktop/Vue/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/agustin/Desktop/Vue/app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTG9naW4iLAoKICBkYXRhOiAoKSA9PiAoewogICAgYm9va3M6IFtdLAogICAgbXlCb29rczogW10sCiAgICB6ZXJvQm9va3M6IGZhbHNlLAogICAgemVyb015Qm9va3M6IGZhbHNlLAogICAgbXlCb29rc0Vycm9yOiBmYWxzZSwKICAgIHNuYWNrYmFyOiBmYWxzZSwKICAgIHNuYWNrVGV4dDogIiIsCiAgICBkaWFsb2c6IGZhbHNlLAogICAgZGlhbG9nVGl0bGU6ICIiLAogICAgZGlhbG9nVGV4dDogIiIKICB9KSwKICBtZXRob2RzOiB7CiAgICBnZXRCb29rcygpIHsKICAgICAgdmFyIG1lID0gdGhpczsKICAgICAgdGhpcy5ib29rcyA9IFtdOwogICAgICB0aGlzLmF4aW9zCiAgICAgICAgLmdldCgiaHR0cDovL2xvY2FsaG9zdDo1NTU1L2Jvb2tzIikKICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICByZXNwb25zZS5kYXRhLmZvckVhY2goYm9vayA9PiB7CiAgICAgICAgICAgIG1lLmJvb2tzLnB1c2goYm9vayk7CiAgICAgICAgICB9KTsKICAgICAgICAgIC8vIFNpIG5vIHRyYWpvIG5pbmfDum4gbGlicm8KICAgICAgICAgIGlmIChtZS5ib29rcy5sZW5ndGggPT0gMCkgewogICAgICAgICAgICBtZS5ib29rcy5wdXNoKHsKICAgICAgICAgICAgICB0aXRsZTogIk5vIGhheSBsaWJyb3MgcGFyYSBtb3N0cmFyIiwKICAgICAgICAgICAgICBhdXRob3I6ICJJbnRlbnRlIG51ZXZhbWVudGUgbcOhcyB0YXJkZSIKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIG1lLm15Qm9va3MucHVzaCh7CiAgICAgICAgICAgICAgdGl0bGU6ICJObyBoYXkgbGlicm9zIHBhcmEgbW9zdHJhciIsCiAgICAgICAgICAgICAgYXV0aG9yOiAiSW50ZW50ZSBudWV2YW1lbnRlIG3DoXMgdGFyZGUiCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBtZS56ZXJvQm9va3MgPSB0cnVlOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbWUuemVyb0Jvb2tzID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgbWUuemVyb0Jvb2tzID0gdHJ1ZTsKICAgICAgICAgIG1lLmJvb2tzLnB1c2goewogICAgICAgICAgICB0aXRsZTogIkVycm9yIGFsIGNhcmdhciBsb3MgbGlicm9zIiwKICAgICAgICAgICAgYXV0aG9yOiAiVnVlbHZhIGEgaW50ZW50YXIgZW4gdW4gbW9tZW50byIKICAgICAgICAgIH0pOwogICAgICAgICAgbWUubXlCb29rcy5wdXNoKHsKICAgICAgICAgICAgdGl0bGU6ICJObyBoYXkgbGlicm9zIHBhcmEgbW9zdHJhciIsCiAgICAgICAgICAgIGF1dGhvcjogIkludGVudGUgbnVldmFtZW50ZSBtw6FzIHRhcmRlIgogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICB9LAogICAgZ2V0TXlCb29rcygpIHsKICAgICAgaWYgKCF0aGlzLnplcm9Cb29rcykgewogICAgICAgIHRoaXMubXlCb29rcyA9IFtdOwogICAgICAgIGxldCBtZSA9IHRoaXM7CiAgICAgICAgdGhpcy5heGlvcwogICAgICAgICAgLmdldCgiaHR0cDovL2xvY2FsaG9zdDo1NTU1L2xvYW5zIikKICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgbWUubXlCb29rc0Vycm9yID0gZmFsc2U7CiAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuZm9yRWFjaChsb2FuID0+IHsKICAgICAgICAgICAgICAvLyBTaSBjb3JyZXNwb25kZSBhIGVzdGUgdXN1YXJpbwogICAgICAgICAgICAgIGlmIChsb2FuLnBhcnRuZXIgPT0gbWUuJHN0b3JlLnN0YXRlLmFjY291bnRJZCkgewogICAgICAgICAgICAgICAgbWUuYm9va3MuZm9yRWFjaChib29rID0+IHsKICAgICAgICAgICAgICAgICAgaWYgKGJvb2suaWQgPT0gbG9hbi5ib29rKSB7CiAgICAgICAgICAgICAgICAgICAgbWUubXlCb29rcy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBib29rLnRpdGxlLAogICAgICAgICAgICAgICAgICAgICAgYXV0aG9yOiBib29rLmF1dGhvciwKICAgICAgICAgICAgICAgICAgICAgIGV4cGlyYXRpb246IGBWZW5jaW1pZW50bzogJHtsb2FuLmV4cGlyYXRpb25fZGF0ZS5zbGljZSgKICAgICAgICAgICAgICAgICAgICAgICAgMCwKICAgICAgICAgICAgICAgICAgICAgICAgMTAKICAgICAgICAgICAgICAgICAgICAgICl9YCwKICAgICAgICAgICAgICAgICAgICAgIGlkOiBib29rLmlkCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIC8vIFNpIG5vIHRyYWpvIG5pbmfDum4gbGlicm8KICAgICAgICAgICAgaWYgKG1lLm15Qm9va3MubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgICBtZS5teUJvb2tzLnB1c2goewogICAgICAgICAgICAgICAgdGl0bGU6ICJObyBoYXkgbGlicm9zIHBhcmEgbW9zdHJhciIsCiAgICAgICAgICAgICAgICBhdXRob3I6ICIiCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgbWUuemVyb015Qm9va3MgPSB0cnVlOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIG1lLnplcm9NeUJvb2tzID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgICBtZS5teUJvb2tzRXJyb3IgPSB0cnVlOwogICAgICAgICAgICBtZS5teUJvb2tzLnB1c2goewogICAgICAgICAgICAgIHRpdGxlOiAiRXJyb3IgYWwgY2FyZ2FyIGxvcyBsaWJyb3MiLAogICAgICAgICAgICAgIGF1dGhvcjogIlZ1ZWx2YSBhIGludGVudGFyIGVuIHVuIG1vbWVudG8iCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBsZW50Qm9vayhpZCkgewogICAgICB0aGlzLnNuYWNrYmFyID0gZmFsc2U7CiAgICAgIHRoaXMuc25hY2tUZXh0ID0gIiI7CiAgICAgIGxldCBtZSA9IHRoaXM7CiAgICAgIHRoaXMuYXhpb3MKICAgICAgICAucG9zdCgiaHR0cDovL2xvY2FsaG9zdDo1NTU1L2xvYW5zL2xlbnQiLCB7CiAgICAgICAgICBCaWQ6IGlkLAogICAgICAgICAgUGlkOiBtZS4kc2Vzc2lvbi5nZXQoImFjY291bnRJZCIpCiAgICAgICAgfSkKICAgICAgICAudGhlbihmdW5jdGlvbigpIHsKICAgICAgICAgIG1lLnNuYWNrYmFyID0gdHJ1ZTsKICAgICAgICAgIG1lLnNuYWNrVGV4dCA9ICJMaWJybyBwZWRpZG8gY29uIMOpeGl0byI7CiAgICAgICAgICBtZS5yZWZyZXNoTXlCb29rcygpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7CiAgICAgICAgICBpZiAoZXJyb3IubWVzc2FnZSA9PSAiTmV0d29yayBFcnJvciIpIHsKICAgICAgICAgICAgbWUuZGlhbG9nVGl0bGUgPSAiRXJyb3IgSW50ZXJubyI7CiAgICAgICAgICAgIG1lLmRpYWxvZ1RleHQgPQogICAgICAgICAgICAgICJPY3VycmnDsyB1biBlcnJvciwgcG9yIGZhdm9yIHZ1ZWx2YSBhIGludGVudGFyIGVuIHVuIG1vbWVudG8uIjsKICAgICAgICAgICAgbWUuZGlhbG9nID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICgKICAgICAgICAgICAgZXJyb3IucmVzcG9uc2UgJiYKICAgICAgICAgICAgZXJyb3IucmVzcG9uc2UuZGF0YS5tZXNzYWdlID09CiAgICAgICAgICAgICAgIlRoZSBwYXJ0bmVyIGhhcyBhbHJlYWR5IGxlbnQgdGhhdCBib29rLiIKICAgICAgICAgICkgewogICAgICAgICAgICBtZS5kaWFsb2dUaXRsZSA9ICJMaWJybyB5YSBwZWRpZG8iOwogICAgICAgICAgICBtZS5kaWFsb2dUZXh0ID0KICAgICAgICAgICAgICAiRXN0ZSBsaWJybyB5YSBmdWUgcGVkaWRvLCBwdWVkZSB2b2x2ZXIgYSBwZWRpcmxvIGx1ZWdvIGRlIGRldm9sdmVybG8geSBhc8OtIGV4dGVuZGVyIHN1IHBlcmlvZG8gZGUgcHLDqXN0YW1vLiI7CiAgICAgICAgICAgIG1lLmRpYWxvZyA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgICBtZS5jaGVja1Nlc3Npb24oZXJyb3IpOwogICAgICAgIH0pOwogICAgfSwKICAgIHJldHVybkJvb2soaWQpIHsKICAgICAgdGhpcy5zbmFja2JhciA9IGZhbHNlOwogICAgICB0aGlzLnNuYWNrVGV4dCA9ICIiOwogICAgICBsZXQgbWUgPSB0aGlzOwogICAgICB0aGlzLmF4aW9zCiAgICAgICAgLnBvc3QoImh0dHA6Ly9sb2NhbGhvc3Q6NTU1NS9sb2Fucy9yZXR1cm4iLCB7CiAgICAgICAgICBCaWQ6IGlkLAogICAgICAgICAgUGlkOiBtZS4kc3RvcmUuc3RhdGUuYWNjb3VudElkCiAgICAgICAgfSkKICAgICAgICAudGhlbihmdW5jdGlvbigpIHsKICAgICAgICAgIG1lLnNuYWNrYmFyID0gdHJ1ZTsKICAgICAgICAgIG1lLnNuYWNrVGV4dCA9ICJMaWJybyBkZXZ1ZWx0byBjb24gw6l4aXRvIjsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnJvcikgewogICAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2UgPT0gIk5ldHdvcmsgRXJyb3IiKSB7CiAgICAgICAgICAgIG1lLmRpYWxvZ1RpdGxlID0gIkVycm9yIEludGVybm8iOwogICAgICAgICAgICBtZS5kaWFsb2dUZXh0ID0KICAgICAgICAgICAgICAiT2N1cnJpw7MgdW4gZXJyb3IsIHBvciBmYXZvciB2dWVsdmEgYSBpbnRlbnRhciBlbiB1biBtb21lbnRvLiI7CiAgICAgICAgICAgIG1lLmRpYWxvZyA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9LAogICAgcmVmcmVzaE15Qm9va3MoKSB7CiAgICAgIC8vIExlIGRveSB0aWVtcG8gYWwgYmFja2VuZCBkZSBhY3R1YWxpemFyIHRvZG8KICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLmdldE15Qm9va3MoKSwgMTAwMCk7CiAgICB9LAogICAgY2hlY2tTZXNzaW9uKGVycm9yKSB7CiAgICAgIGlmIChlcnJvci5yZXNwb25zZSAmJiBlcnJvci5yZXNwb25zZS5kYXRhLm1lc3NhZ2UgPT0gIkludmFsaWQgdG9rZW4iKSB7CiAgICAgICAgbWUuZGlhbG9nVGl0bGUgPSAiU2VzacOzbiBleHBpcmFkYSI7CiAgICAgICAgbWUuZGlhbG9nVGV4dCA9ICJQb3IgZmF2b3IsIHZ1ZWx2YSBhIGluaWNpYXIgc2VzacOzbiBjb24gc3VzIGNyZWRlbmNpYWxlcy4iOwogICAgICAgIG1lLmRpYWxvZyA9IHRydWU7CiAgICAgICAgbWUuJHNlc3Npb24uZGVzdHJveSgpOwogICAgICB9CiAgICB9LAogICAgY2xvc2VEaWFsb2coKSB7CiAgICAgIHRoaXMuZGlhbG9nID0gZmFsc2U7CiAgICAgICF0aGlzLiRzZXNzaW9uLmV4aXN0cygpICYmIHRoaXMuJHJvdXRlci5wdXNoKCcvbG9naW4nKTsKICAgIH0KICB9LAogIGJlZm9yZU1vdW50KCkgewogICAgaWYgKHRoaXMuJHNlc3Npb24uZXhpc3RzKCkpIHsKICAgICAgdGhpcy5nZXRCb29rcygpOwogICAgICB0aGlzLmdldE15Qm9va3MoKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvbG9naW4iKTsKICAgIH0KICB9LAp9Owo="},{"version":3,"sources":["ListadoSocio.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ListadoSocio.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-app id=\"container\">\n    <v-container fluid class=\"mx-auto my-auto\">\n      <v-row align=\"center\" justify=\"center\">\n        <v-col cols=\"4\">\n          <v-card max-width=\"600\" class=\"mx-auto\" shaped>\n            <v-toolbar color=\"blue-grey darken-3\" dark>\n              <v-toolbar-title>Todos los libros</v-toolbar-title>\n            </v-toolbar>\n            <v-list two-line subheader>\n              <v-list-item v-for=\"book in books\" :key=\"book.id\">\n                <v-list-item-content>\n                  <v-list-item-title v-text=\"book.title\"></v-list-item-title>\n                  <v-list-item-subtitle v-text=\"book.author\"></v-list-item-subtitle>\n                </v-list-item-content>\n\n                <v-list-item-action>\n                  <v-btn\n                    class=\"ma-2\"\n                    elevation=\"4\"\n                    rounded\n                    dark\n                    color=\"light-blue\"\n                    v-if=\"!zeroBooks\"\n                    @click=\"lentBook(book.id)\"\n                  >Pedir</v-btn>\n                  <v-btn\n                    class=\"ma-2\"\n                    elevation=\"4\"\n                    rounded\n                    dark\n                    color=\"light-blue\"\n                    v-if=\"zeroBooks\"\n                    @click=\"getBooks\"\n                  >Reintentar</v-btn>\n                </v-list-item-action>\n              </v-list-item>\n            </v-list>\n          </v-card>\n        </v-col>\n        <v-col cols=\"4\">\n          <v-card max-width=\"600\" class=\"mx-auto\" shaped>\n            <v-toolbar color=\"blue-grey darken-3\" dark>\n              <v-toolbar-title>Mis libros</v-toolbar-title>\n            </v-toolbar>\n            <v-list two-line subheader>\n              <v-list-item v-for=\"book in myBooks\" :key=\"book.title\">\n                <v-list-item-content>\n                  <v-list-item-title v-text=\"book.title\"></v-list-item-title>\n                  <v-list-item-subtitle v-text=\"book.author\"></v-list-item-subtitle>\n                  <v-list-item-subtitle v-text=\"book.expiration\"></v-list-item-subtitle>\n                </v-list-item-content>\n\n                <v-list-item-action>\n                  <v-btn\n                    class=\"ma-2\"\n                    elevation=\"4\"\n                    rounded\n                    dark\n                    color=\"red\"\n                    v-if=\"!zeroMyBooks && !myBooksError\"\n                    @click=\"returnBook(book.id); refreshMyBooks();\"\n                  >Devolver</v-btn>\n                  <v-btn\n                    class=\"ma-2\"\n                    elevation=\"4\"\n                    rounded\n                    dark\n                    color=\"light-blue\"\n                    v-if=\"myBooksError\"\n                    @click=\"getMyBooks\"\n                  >Reintentar</v-btn>\n                </v-list-item-action>\n              </v-list-item>\n            </v-list>\n          </v-card>\n        </v-col>\n      </v-row>\n      <v-snackbar v-model=\"snackbar\" timeout=\"3000\" color=\"success\" bottom>{{ snackText }}</v-snackbar>\n      <v-dialog v-model=\"dialog\" width=\"500\">\n        <v-card>\n          <v-card-title color=\"white\" class=\"headline light-blue\" primary-title>{{ dialogTitle }}</v-card-title>\n\n          <p class=\"mx-4 my-4\">{{ dialogText }}</p>\n\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn color=\"primary\" text @click=\"dialog = false; !this.$session.exists() && this.$router.push(\"/login\")\">Cerrar</v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n    </v-container>\n  </v-app>\n</template>\n\n<script>\nexport default {\n  name: \"Login\",\n\n  data: () => ({\n    books: [],\n    myBooks: [],\n    zeroBooks: false,\n    zeroMyBooks: false,\n    myBooksError: false,\n    snackbar: false,\n    snackText: \"\",\n    dialog: false,\n    dialogTitle: \"\",\n    dialogText: \"\"\n  }),\n  methods: {\n    getBooks() {\n      var me = this;\n      this.books = [];\n      this.axios\n        .get(\"http://localhost:5555/books\")\n        .then(response => {\n          response.data.forEach(book => {\n            me.books.push(book);\n          });\n          // Si no trajo ningún libro\n          if (me.books.length == 0) {\n            me.books.push({\n              title: \"No hay libros para mostrar\",\n              author: \"Intente nuevamente más tarde\"\n            });\n            me.myBooks.push({\n              title: \"No hay libros para mostrar\",\n              author: \"Intente nuevamente más tarde\"\n            });\n            me.zeroBooks = true;\n          } else {\n            me.zeroBooks = false;\n          }\n        })\n        .catch(() => {\n          me.zeroBooks = true;\n          me.books.push({\n            title: \"Error al cargar los libros\",\n            author: \"Vuelva a intentar en un momento\"\n          });\n          me.myBooks.push({\n            title: \"No hay libros para mostrar\",\n            author: \"Intente nuevamente más tarde\"\n          });\n        });\n    },\n    getMyBooks() {\n      if (!this.zeroBooks) {\n        this.myBooks = [];\n        let me = this;\n        this.axios\n          .get(\"http://localhost:5555/loans\")\n          .then(response => {\n            me.myBooksError = false;\n            response.data.forEach(loan => {\n              // Si corresponde a este usuario\n              if (loan.partner == me.$store.state.accountId) {\n                me.books.forEach(book => {\n                  if (book.id == loan.book) {\n                    me.myBooks.push({\n                      title: book.title,\n                      author: book.author,\n                      expiration: `Vencimiento: ${loan.expiration_date.slice(\n                        0,\n                        10\n                      )}`,\n                      id: book.id\n                    });\n                  }\n                });\n              }\n            });\n            // Si no trajo ningún libro\n            if (me.myBooks.length == 0) {\n              me.myBooks.push({\n                title: \"No hay libros para mostrar\",\n                author: \"\"\n              });\n              me.zeroMyBooks = true;\n            } else {\n              me.zeroMyBooks = false;\n            }\n          })\n          .catch(() => {\n            me.myBooksError = true;\n            me.myBooks.push({\n              title: \"Error al cargar los libros\",\n              author: \"Vuelva a intentar en un momento\"\n            });\n          });\n      }\n    },\n    lentBook(id) {\n      this.snackbar = false;\n      this.snackText = \"\";\n      let me = this;\n      this.axios\n        .post(\"http://localhost:5555/loans/lent\", {\n          Bid: id,\n          Pid: me.$session.get(\"accountId\")\n        })\n        .then(function() {\n          me.snackbar = true;\n          me.snackText = \"Libro pedido con éxito\";\n          me.refreshMyBooks();\n        })\n        .catch(function(error) {\n          if (error.message == \"Network Error\") {\n            me.dialogTitle = \"Error Interno\";\n            me.dialogText =\n              \"Ocurrió un error, por favor vuelva a intentar en un momento.\";\n            me.dialog = true;\n          }\n          if (\n            error.response &&\n            error.response.data.message ==\n              \"The partner has already lent that book.\"\n          ) {\n            me.dialogTitle = \"Libro ya pedido\";\n            me.dialogText =\n              \"Este libro ya fue pedido, puede volver a pedirlo luego de devolverlo y así extender su periodo de préstamo.\";\n            me.dialog = true;\n          }\n          me.checkSession(error);\n        });\n    },\n    returnBook(id) {\n      this.snackbar = false;\n      this.snackText = \"\";\n      let me = this;\n      this.axios\n        .post(\"http://localhost:5555/loans/return\", {\n          Bid: id,\n          Pid: me.$store.state.accountId\n        })\n        .then(function() {\n          me.snackbar = true;\n          me.snackText = \"Libro devuelto con éxito\";\n        })\n        .catch(function(error) {\n          if (error.message == \"Network Error\") {\n            me.dialogTitle = \"Error Interno\";\n            me.dialogText =\n              \"Ocurrió un error, por favor vuelva a intentar en un momento.\";\n            me.dialog = true;\n          }\n        });\n    },\n    refreshMyBooks() {\n      // Le doy tiempo al backend de actualizar todo\n      setTimeout(() => this.getMyBooks(), 1000);\n    },\n    checkSession(error) {\n      if (error.response && error.response.data.message == \"Invalid token\") {\n        me.dialogTitle = \"Sesión expirada\";\n        me.dialogText = \"Por favor, vuelva a iniciar sesión con sus credenciales.\";\n        me.dialog = true;\n        me.$session.destroy();\n      }\n    },\n    closeDialog() {\n      this.dialog = false;\n      !this.$session.exists() && this.$router.push('/login');\n    }\n  },\n  beforeMount() {\n    if (this.$session.exists()) {\n      this.getBooks();\n      this.getMyBooks();\n    } else {\n      this.$router.push(\"/login\");\n    }\n  },\n};\n</script>\n\n<style scoped>\n#container {\n  background: url(\"../assets/background2.jpg\") no-repeat center center fixed;\n  -webkit-background-size: cover;\n  -moz-background-size: cover;\n  -o-background-size: cover;\n  background-size: cover;\n}\n#ingresar {\n  color: white;\n}\n#crear {\n  text-transform: inherit;\n}\n</style>\n"]}]}