{"remainingRequest":"/home/agustin/Desktop/Vue/app/node_modules/babel-loader/lib/index.js!/home/agustin/Desktop/Vue/app/node_modules/vuetify-loader/lib/loader.js!/home/agustin/Desktop/Vue/app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/agustin/Desktop/Vue/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/agustin/Desktop/Vue/app/src/components/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/agustin/Desktop/Vue/app/src/components/Login.vue","mtime":1578771009748},{"path":"/home/agustin/Desktop/Vue/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/agustin/Desktop/Vue/app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/agustin/Desktop/Vue/app/node_modules/vuetify-loader/lib/loader.js","mtime":1567240333000},{"path":"/home/agustin/Desktop/Vue/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/agustin/Desktop/Vue/app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkxvZ2luIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZW1haWw6ICIiLAogICAgICBwYXNzd29yZDogIiIsCiAgICAgIHNob3dQYXNzOiB0cnVlLAogICAgICBlbWFpbFJ1bGVzOiBbZnVuY3Rpb24gKHYpIHsKICAgICAgICByZXR1cm4gISF2IHx8ICJEZWJlIGluZ3Jlc2FyIHN1IGUtbWFpbCI7CiAgICAgIH0sIGZ1bmN0aW9uICh2KSB7CiAgICAgICAgcmV0dXJuIC8uK0AuK1wuLisvLnRlc3QodikgfHwgIkVzdGUgZS1tYWlsIG5vIGVzIHbDoWxpZG8iOwogICAgICB9LCAvLyBhbGdvQGFsZ28uYWxnbwogICAgICBmdW5jdGlvbiAodikgewogICAgICAgIHJldHVybiAodiB8fCAiIikuaW5kZXhPZigiICIpIDwgMCB8fCAiRXN0ZSBlLW1haWwgbm8gZXMgdsOhbGlkbyI7CiAgICAgIH0gLy8gc2luIGVzcGFjaW9zCiAgICAgIF0sCiAgICAgIG1lc3NhZ2U6ICIiLAogICAgICB2YWxpZDogZmFsc2UKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBmb3JtU3VibWl0OiBmdW5jdGlvbiBmb3JtU3VibWl0KGUpIHsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB2YXIgbWUgPSB0aGlzOwogICAgICB0aGlzLmF4aW9zLnBvc3QoImh0dHA6Ly9sb2NhbGhvc3Q6NTU1NS9sb2dpbiIsIHsKICAgICAgICBlbWFpbDogdGhpcy5lbWFpbCwKICAgICAgICBwYXNzd29yZDogdGhpcy5wYXNzd29yZAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIG1lLm1lc3NhZ2UgPSAiIjsKICAgICAgICBtZS4kc2Vzc2lvbi5zdGFydCgpOwogICAgICAgIG1lLiRzZXNzaW9uLnNldCgiand0IiwgcmVzcG9uc2UuZGF0YS50b2tlbik7CiAgICAgICAgbWUuJHNlc3Npb24uc2V0KCJhY2NvdW50SWQiLCByZXNwb25zZS5kYXRhLmlkKTsKICAgICAgICBtZS4kc2Vzc2lvbi5zZXQoImFjY291bnRSb2xlIiwgcmVzcG9uc2UuZGF0YS5yb2xlKTsKICAgICAgICBtZS5heGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vbiA9IHsKICAgICAgICAgICJhdXRob3JpemF0aW9uIjogcmVzcG9uc2UuZGF0YS50b2tlbgogICAgICAgIH07CgogICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnJvbGUgPT0gMSkgewogICAgICAgICAgbWUuJHJvdXRlci5wdXNoKCIvbGlzdGFkb1NvY2lvIik7CiAgICAgICAgfSAvLyByZXNwb25zZS5kYXRhLnJvbGUgPT0gMSBzb2NpbwogICAgICAgIC8vIHJlc3BvbnNlLmRhdGEucm9sZSA9PSAwIGJpYmxpb3RlY2FyaW8KCiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGlmIChlcnJvci5yZXNwb25zZSAmJiBlcnJvci5yZXNwb25zZS5zdGF0dXMgPT0gNDA0KSB7CiAgICAgICAgICBtZS5tZXNzYWdlID0gIkVsIGUtbWFpbCB5L28gbGEgY29udHJhc2XDsWEgc29uIGluY29ycmVjdG9zIjsKICAgICAgICB9IGVsc2UgaWYgKGVycm9yLnJlc3BvbnNlICYmIGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PSA1MDAgfHwgZXJyb3IubWVzc2FnZSkgewogICAgICAgICAgbWUubWVzc2FnZSA9ICJIdWJvIHVuIGVycm9yLCBwb3IgZmF2b3IgdnVlbHZhIGEgaW50ZW50YXIgZW4gdW4gbW9tZW50by4iOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA,eAAA;AACA,EAAA,IAAA,EAAA,OADA;AAGA,EAAA,IAAA,EAAA;AAAA,WAAA;AACA,MAAA,KAAA,EAAA,EADA;AAEA,MAAA,QAAA,EAAA,EAFA;AAGA,MAAA,QAAA,EAAA,IAHA;AAIA,MAAA,UAAA,EAAA,CACA,UAAA,CAAA;AAAA,eAAA,CAAA,CAAA,CAAA,IAAA,yBAAA;AAAA,OADA,EAEA,UAAA,CAAA;AAAA,eAAA,YAAA,IAAA,CAAA,CAAA,KAAA,0BAAA;AAAA,OAFA,EAEA;AACA,gBAAA,CAAA;AAAA,eAAA,CAAA,CAAA,IAAA,EAAA,EAAA,OAAA,CAAA,GAAA,IAAA,CAAA,IAAA,0BAAA;AAAA,OAHA,CAGA;AAHA,OAJA;AASA,MAAA,OAAA,EAAA,EATA;AAUA,MAAA,KAAA,EAAA;AAVA,KAAA;AAAA,GAHA;AAeA,EAAA,OAAA,EAAA;AACA,IAAA,UADA,sBACA,CADA,EACA;AACA,MAAA,CAAA,CAAA,cAAA;AACA,UAAA,EAAA,GAAA,IAAA;AACA,WAAA,KAAA,CACA,IADA,CACA,6BADA,EACA;AACA,QAAA,KAAA,EAAA,KAAA,KADA;AAEA,QAAA,QAAA,EAAA,KAAA;AAFA,OADA,EAKA,IALA,CAKA,UAAA,QAAA,EAAA;AACA,QAAA,EAAA,CAAA,OAAA,GAAA,EAAA;AAEA,QAAA,EAAA,CAAA,QAAA,CAAA,KAAA;AACA,QAAA,EAAA,CAAA,QAAA,CAAA,GAAA,CAAA,KAAA,EAAA,QAAA,CAAA,IAAA,CAAA,KAAA;AACA,QAAA,EAAA,CAAA,QAAA,CAAA,GAAA,CAAA,WAAA,EAAA,QAAA,CAAA,IAAA,CAAA,EAAA;AACA,QAAA,EAAA,CAAA,QAAA,CAAA,GAAA,CAAA,aAAA,EAAA,QAAA,CAAA,IAAA,CAAA,IAAA;AACA,QAAA,EAAA,CAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA,MAAA,GAAA;AACA,2BAAA,QAAA,CAAA,IAAA,CAAA;AADA,SAAA;;AAGA,YAAA,QAAA,CAAA,IAAA,CAAA,IAAA,IAAA,CAAA,EAAA;AACA,UAAA,EAAA,CAAA,OAAA,CAAA,IAAA,CAAA,eAAA;AACA,SAZA,CAaA;AACA;;AACA,OApBA,EAqBA,KArBA,CAqBA,UAAA,KAAA,EAAA;AACA,YAAA,KAAA,CAAA,QAAA,IAAA,KAAA,CAAA,QAAA,CAAA,MAAA,IAAA,GAAA,EAAA;AACA,UAAA,EAAA,CAAA,OAAA,GAAA,6CAAA;AACA,SAFA,MAEA,IAAA,KAAA,CAAA,QAAA,IAAA,KAAA,CAAA,QAAA,CAAA,MAAA,IAAA,GAAA,IAAA,KAAA,CAAA,OAAA,EAAA;AACA,UAAA,EAAA,CAAA,OAAA,GACA,2DADA;AAEA;AACA,OA5BA;AA6BA;AAjCA;AAfA,CAAA","sourcesContent":["<template>\n  <v-app id=\"container\">\n    <v-container fluid class=\"mx-auto my-auto\">\n      <v-row>\n        <v-col cols=\"12\">\n          <v-row justify=\"center\">\n            <v-card elevation=\"10\" class=\"mt-5 px-4\" shaped>\n              <v-card-title>Iniciar sesión</v-card-title>\n              <v-card-text>\n                <v-form v-model=\"valid\" @submit=\"formSubmit\" ref=\"form\">\n                  <v-text-field\n                    v-model=\"email\"\n                    :rules=\"emailRules\"\n                    label=\"E-mail\"\n                    prepend-icon=\"mdi-account-circle\"\n                    required\n                  ></v-text-field>\n                  <v-text-field\n                    v-model=\"password\"\n                    :rules=\"[v => !!v || 'Debe ingresar su contraseña']\"\n                    :append-icon=\"showPass ? 'mdi-eye-off' : 'mdi-eye'\"\n                    :type=\"showPass ? 'password' : 'text'\"\n                    name=\"input-10-2\"\n                    label=\"Contraseña\"\n                    class=\"input-group--focused\"\n                    prepend-icon=\"mdi-lock\"\n                    @click:append=\"showPass = !showPass\"\n                    required\n                  ></v-text-field>\n                  <div class=\"pt-3\">\n                    <v-btn\n                      :disabled=\"!valid\"\n                      block\n                      rounded\n                      color=\"info\"\n                      id=\"ingresar\"\n                      type=\"submit\"\n                    >Ingresar</v-btn>\n                  </div>\n                  <center class=\"pt-4 pb-1\">\n                    <p style=\"color:red\">{{message}}</p>\n                  </center>\n                </v-form>\n              </v-card-text>\n            </v-card>\n          </v-row>\n        </v-col>\n      </v-row>\n    </v-container>\n  </v-app>\n</template>\n\n<script>\nexport default {\n  name: \"Login\",\n\n  data: () => ({\n    email: \"\",\n    password: \"\",\n    showPass: true,\n    emailRules: [\n      v => !!v || \"Debe ingresar su e-mail\",\n      v => /.+@.+\\..+/.test(v) || \"Este e-mail no es válido\", // algo@algo.algo\n      v => (v || \"\").indexOf(\" \") < 0 || \"Este e-mail no es válido\" // sin espacios\n    ],\n    message: \"\",\n    valid: false\n  }),\n  methods: {\n    formSubmit(e) {\n      e.preventDefault();\n      let me = this;\n      this.axios\n        .post(\"http://localhost:5555/login\", {\n          email: this.email,\n          password: this.password\n        })\n        .then(function(response) {\n          me.message = \"\";\n\n          me.$session.start();\n          me.$session.set(\"jwt\", response.data.token);\n          me.$session.set(\"accountId\", response.data.id);\n          me.$session.set(\"accountRole\", response.data.role);\n          me.axios.defaults.headers.common = {\n            \"authorization\": response.data.token\n          }\n          if (response.data.role == 1) {\n            me.$router.push(\"/listadoSocio\");\n          }\n          // response.data.role == 1 socio\n          // response.data.role == 0 bibliotecario\n        })\n        .catch(function(error) {\n          if (error.response && error.response.status == 404) {\n            me.message = \"El e-mail y/o la contraseña son incorrectos\";\n          } else if ((error.response && error.response.status == 500) || error.message) {\n            me.message =\n              \"Hubo un error, por favor vuelva a intentar en un momento.\";\n          }\n        });\n    }\n  }\n};\n</script>\n\n<style scoped>\n#container {\n  background: url(\"../assets/background2.jpg\") no-repeat center center fixed;\n  -webkit-background-size: cover;\n  -moz-background-size: cover;\n  -o-background-size: cover;\n  background-size: cover;\n}\n#ingresar {\n  color: white;\n}\n#crear {\n  text-transform: inherit;\n}\n</style>\n"],"sourceRoot":"src/components"}]}